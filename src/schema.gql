# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

"""유저 엔티티"""
type User {
  """유저 ID"""
  id: ID!

  """유저 이름"""
  name: String!

  """생년월일"""
  birthday: String!

  """상태 메시지"""
  statusMessage: String

  """프로필 이미지 ID"""
  profileImageId: String

  """팔로워 수"""
  followersCount: Int!

  """팔로잉 수"""
  followingCount: Int!

  """팔로워 목록"""
  followers: [User!]

  """팔로잉 목록"""
  following: [User!]

  """생성된 날짜"""
  createdAt: DateTime!

  """마지막 업데이트 날짜"""
  updatedAt: DateTime

  """프로필 이미지"""
  profileImage: File
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""파일 엔티티"""
type File {
  """파일 ID"""
  id: ID!

  """파일사이즈"""
  size: Float!

  """파일의 MIME 타입"""
  type: String!

  """파일의 storage 키"""
  key: String!

  """파일 업로드 일자"""
  createdAt: DateTime!
}

"""스토리의 파일 순서"""
type StoryFile {
  """스토리에 포함된 파일"""
  file: File!

  """파일의 순서"""
  order: Int!
}

"""스토리 엔티티"""
type Story {
  """스토리 ID"""
  id: ID!

  """스토리를 작성한 사용자"""
  userId: String

  """스토리 내용"""
  content: String!

  """스토리에 포함된 파일 목록"""
  files: [StoryFile!]

  """댓글 개수"""
  commentsCount: Int!

  """스토리 생성일자"""
  createdAt: DateTime!

  """스토리 수정일자"""
  updatedAt: DateTime

  """스토리를 작성한 사용자"""
  user: User!

  """댓글 목록"""
  comments(limit: Int = 5, offset: Int = 0): CommentConnection!
}

type StoryConnection {
  edges: [Story!]!
  hasNextPage: Boolean!
  nextOffset: Float
}

"""댓글 엔티티"""
type Comment {
  """댓글 ID"""
  id: ID!

  """작성자 ID"""
  userId: ID!

  """작성자"""
  user: User!

  """스토리 ID"""
  storyId: ID!

  """댓글 내용"""
  content: String!

  """작성일"""
  createdAt: DateTime!

  """댓글 목록"""
  comments(limit: Int = 5, offset: Int = 0): CommentConnection!
}

type CommentConnection {
  edges: [Comment!]!
  hasNextPage: Boolean!
  nextOffset: Float
}

type Query {
  """유저 찾기 (profileImage: File 필드 포함)"""
  user(id: String!): User!

  """스토리 조회"""
  story(
    """스토리 ID"""
    id: ID!
  ): Story!

  """스토리 목록 조회"""
  stories(limit: Int = 5, offset: Int = 0): StoryConnection!
}

type Mutation {
  """유저 수정"""
  updateUser(input: UpdateUserDto!): User!

  """유저 삭제"""
  deleteUser(id: ID!): Boolean!

  """유저 팔로우"""
  followUser(
    """팔로우할 유저 ID"""
    userId: ID!
  ): Boolean!

  """유저 언팔로우"""
  unfollowUser(
    """언팔로우할 유저 ID"""
    userId: ID!
  ): Boolean!

  """새로운 스토리를 생성."""
  createStory(input: CreateStoryDto!): Story!

  """스토리 업데이트"""
  updateStory(input: UpdateStoryDto!): Story!

  """스토리를 삭제"""
  deleteStory(
    """스토리 ID"""
    id: ID!
  ): Boolean!

  """댓글 생성"""
  createComment(input: CreateCommentDto!): Comment!

  """댓글 수정"""
  updateComment(input: UpdateCommentDto!): Comment!

  """댓글 삭제"""
  deleteComment(
    """댓글 ID"""
    id: ID!
  ): Boolean!
}

"""유저 수정에 필요한 입력 데이터"""
input UpdateUserDto {
  """유저의 고유 ID"""
  id: ID!

  """유저 이름 (최소 2자, 최대 12자)"""
  name: String

  """생년월일 (yyyy-mm-dd 형식)"""
  birthday: String

  """상태 메시지 (최대 30자)"""
  statusMessage: String

  """프로필 이미지 ID"""
  profileImageId: String
}

"""스토리 생성에 필요한 입력 데이터"""
input CreateStoryDto {
  """스토리의 내용"""
  content: String!

  """스토리에 포함될 파일과 순서 목록"""
  files: [FileOrderInput!]
}

"""파일 ID와 순서를 나타내는 입력 데이터"""
input FileOrderInput {
  """파일 ID"""
  fileId: ID!

  """파일의 순서"""
  order: Float!
}

"""스토리 업데이트에 필요한 입력 데이터"""
input UpdateStoryDto {
  """스토리 ID"""
  id: ID!

  """스토리의 내용"""
  content: String

  """스토리에 포함될 파일과 순서 목록"""
  files: [FileOrderInput!]
}

input CreateCommentDto {
  """스토리 ID"""
  storyId: ID!

  """댓글 내용"""
  content: String!
}

input UpdateCommentDto {
  """댓글 ID"""
  id: ID!

  """수정할 내용"""
  content: String!
}