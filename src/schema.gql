# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

"""유저 엔티티"""
type User {
  """유저 ID"""
  id: ID!

  """유저 이름"""
  name: String!

  """생년월일"""
  birthday: String!

  """상태 메시지"""
  statusMessage: String

  """프로필 이미지 ID"""
  profileImageId: String

  """친구 수"""
  friendsCount: Int

  """구독한 사용자 수"""
  subscriptionsCount: Int

  """구독자 수"""
  subscribersCount: Int

  """현재 사용자가 해당 유저와 친구인지 여부"""
  isMyFriend: Boolean

  """현재 사용자가 해당 유저를 구독하고 있는지 여부"""
  isSubscribed: Boolean

  """생성된 날짜"""
  createdAt: DateTime!

  """마지막 업데이트 날짜"""
  updatedAt: DateTime

  """프로필 이미지"""
  profileImage: File

  """사용자의 스토리 목록"""
  stories(limit: Int = 5, offset: Int = 0): StoryConnection
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

"""파일 엔티티"""
type File {
  """파일 ID"""
  id: ID!

  """파일사이즈"""
  size: Float!

  """파일의 MIME 타입"""
  type: String!

  """파일의 storage 키"""
  key: String!

  """파일 업로드 일자"""
  createdAt: DateTime!
}

"""스토리의 파일 순서"""
type StoryFile {
  """스토리에 포함된 파일"""
  file: File!

  """파일의 순서"""
  order: Int!
}

"""스토리 엔티티"""
type Story {
  """스토리 ID"""
  id: ID!

  """스토리를 작성한 사용자"""
  userId: String

  """스토리 내용"""
  content: String!

  """스토리에 포함된 파일 목록"""
  files: [StoryFile!]

  """댓글 개수"""
  commentsCount: Int

  """좋아요 개수"""
  likesCount: Int

  """현재 사용자가 스토리에 좋아요를 했는지 여부"""
  hasLiked: Boolean

  """스토리 생성일자"""
  createdAt: DateTime!

  """스토리 수정일자"""
  updatedAt: DateTime

  """스토리를 작성한 사용자"""
  user: User!

  """댓글 목록"""
  comments(limit: Int = 5, offset: Int = 0): CommentConnection!
}

"""스토리 페이지네이션 정보"""
type StoryConnection {
  edges: [Story!]!
  hasNextPage: Boolean!
  nextOffset: Float
}

"""알림 엔티티"""
type Notification {
  """알림 ID"""
  id: ID!

  """알림 유형"""
  type: String!

  """알림 데이터(JSON 문자열)"""
  data: String

  """읽음 여부"""
  read: Boolean!

  """생성된 날짜"""
  createdAt: DateTime!
}

"""채팅방 엔티티"""
type Room {
  """채팅방 ID"""
  id: ID!

  """채팅방에 참여한 사용자들"""
  users: [User!]!

  """생성된 날짜"""
  createdAt: DateTime!

  """채팅방의 메시지 목록"""
  messages(limit: Int = 20, offset: Int = 0): MessageConnection!
}

"""메시지 엔티티"""
type Message {
  """메시지 ID"""
  id: ID!

  """채팅방"""
  room: Room

  """메시지 송신 유저"""
  sender: User

  """메시지 내용"""
  content: String!

  """메시지 타입 (text, emoji)"""
  type: String!

  """생성된 날짜"""
  createdAt: DateTime!
}

"""메시지 페이지네이션 정보"""
type MessageConnection {
  """메시지 목록"""
  edges: [Message!]!

  """다음 페이지 여부"""
  hasNextPage: Boolean!

  """다음 페이지 오프셋"""
  nextOffset: Int
}

"""댓글 엔티티"""
type Comment {
  """댓글 ID"""
  id: ID!

  """작성자 ID"""
  userId: ID!

  """작성자"""
  user: User!

  """스토리 ID"""
  storyId: ID!

  """댓글 내용"""
  content: String!

  """댓글 타입 (text, emoji)"""
  type: String!

  """작성일"""
  createdAt: DateTime!
}

"""댓글 페이지네이션 정보"""
type CommentConnection {
  """댓글 목록"""
  edges: [Comment!]!

  """다음 페이지 여부"""
  hasNextPage: Boolean!

  """다음 페이지 오프셋"""
  nextOffset: Int
}

"""이모지 엔티티"""
type Emoji {
  """이모지 ID"""
  id: ID!

  """이모지 키"""
  key: String!
}

type Query {
  """유저 찾기"""
  user(id: String!): User!

  """특정 사용자의 구독 목록 조회"""
  subscriptions(id: String!): [User!]!

  """특정 사용자의 구독자 목록 조회"""
  subscribers(id: String!): [User!]!

  """특정 사용자의 친구 목록"""
  friends(id: String!): [User!]!

  """친구 요청 목록 조회"""
  friendRequests: [User!]!

  """사용자 검색"""
  searchUsers(query: String!, limit: Int! = 10, offset: Int! = 0): [User!]!

  """알림 목록 조회"""
  notifications: [Notification!]!

  """내 채팅방 목록 조회"""
  myRooms: [Room!]!

  """채팅방 상세 조회"""
  room(roomId: ID!): Room!

  """스토리 조회"""
  story(
    """스토리 ID"""
    id: ID!
  ): Story!

  """스토리 목록 조회"""
  stories(limit: Int = 5, offset: Int = 0): StoryConnection!

  """스토리 검색"""
  searchStories(query: String!, limit: Int! = 10, offset: Int! = 0): [Story!]!

  """사용자의 스토리 목록 조회"""
  userStories(userId: ID!, limit: Int = 5, offset: Int = 0): StoryConnection!

  """모든 이모지 키를 가져옵니다."""
  getEmojis: [Emoji!]!
}

type Mutation {
  """유저 수정"""
  updateUser(input: UpdateUserDto!): User!

  """유저 삭제"""
  deleteUser: Boolean!

  """친구 요청 보내기"""
  sendFriendRequest(userId: ID!): Boolean!

  """친구 요청 수락"""
  acceptFriendRequest(userId: ID!): Boolean!

  """친구 요청 거절"""
  rejectFriendRequest(userId: ID!): Boolean!

  """친구 삭제"""
  unFriendUser(userId: ID!): Boolean!

  """사용자 구독하기"""
  subscribeUser(userId: ID!): Boolean!

  """구독 취소하기"""
  unsubscribeUser(userId: ID!): Boolean!

  """사용자의 FCM 토큰 업데이트"""
  updateUserDeviceToken(deviceToken: String!): Boolean!

  """알림 읽음 처리"""
  readNotification(notificationId: String!): Boolean!

  """채팅방 생성"""
  createRoom(userId: ID!): Room!

  """채팅방 나가기"""
  leaveRoom(roomId: ID!): Boolean!

  """새로운 스토리를 생성."""
  createStory(input: CreateStoryDto!): Story!

  """스토리 업데이트"""
  updateStory(input: UpdateStoryDto!): Story!

  """스토리를 삭제"""
  deleteStory(
    """스토리 ID"""
    id: ID!
  ): Boolean!

  """스토리에 좋아요 누르기"""
  likeStory(storyId: ID!): Boolean!

  """스토리에 좋아요 취소하기"""
  dislikeStory(storyId: ID!): Boolean!

  """댓글 생성"""
  createComment(input: CreateCommentDto!): Comment!

  """댓글 수정"""
  updateComment(input: UpdateCommentDto!): Comment!

  """댓글 삭제"""
  deleteComment(
    """댓글 ID"""
    id: ID!
  ): Boolean!

  """메시지 전송"""
  sendMessage(input: SendMessageDto!): Message!
}

"""유저 수정에 필요한 입력 데이터"""
input UpdateUserDto {
  """유저 이름 (최소 2자, 최대 12자)"""
  name: String

  """생년월일 (yyyy-mm-dd 형식)"""
  birthday: String

  """상태 메시지 (최대 30자)"""
  statusMessage: String

  """프로필 이미지 ID"""
  profileImageId: String
}

"""스토리 생성에 필요한 입력 데이터"""
input CreateStoryDto {
  """스토리의 내용"""
  content: String!

  """스토리에 포함될 파일과 순서 목록"""
  files: [FileOrderInput!]
}

"""파일 ID와 순서를 나타내는 입력 데이터"""
input FileOrderInput {
  """파일 ID"""
  fileId: ID!

  """파일의 순서"""
  order: Float!
}

"""스토리 업데이트에 필요한 입력 데이터"""
input UpdateStoryDto {
  """스토리 ID"""
  id: ID!

  """스토리의 내용"""
  content: String

  """스토리에 포함될 파일과 순서 목록"""
  files: [FileOrderInput!]
}

"""댓글 생성에 필요한 입력 데이터"""
input CreateCommentDto {
  """스토리 ID"""
  storyId: ID!

  """댓글 내용"""
  content: String!

  """댓글 타입 (text, emoji)"""
  type: MessageType! = TEXT
}

enum MessageType {
  TEXT
  EMOJI
}

"""댓글 업데이트에 필요한 입력 데이터"""
input UpdateCommentDto {
  """댓글 ID"""
  id: ID!

  """수정할 내용"""
  content: String!

  """댓글 타입 (text, emoji)"""
  type: MessageType! = TEXT
}

"""메시지 전송에 필요한 입력 데이터"""
input SendMessageDto {
  """메시지 내용"""
  content: String!

  """채팅방 ID"""
  roomId: ID!

  """메시지 타입 (text, emoji)"""
  type: MessageType!
}

type Subscription {
  onNotifications: Notification!

  """본인에게 도착하는 모든 메시지 구독"""
  onMessages: Message!
}